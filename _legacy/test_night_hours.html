<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>야간수당 계산 테스트</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    .test-case { margin: 10px 0; padding: 10px; border: 1px solid #ccc; }
    .pass { background-color: #d4edda; }
    .fail { background-color: #f8d7da; }
  </style>
</head>
<body>
  <h1>야간수당 계산 로직 테스트</h1>
  <div id="results"></div>
  
  <script src="js/salary-calculator.js"></script>
  <script>
    const testCases = [
      { start: "05:00", end: "14:00", expected: 1, desc: "당일 새벽 출근 (05:00~14:00)" },
      { start: "04:00", end: "13:00", expected: 2, desc: "당일 새벽 출근 (04:00~13:00)" },
      { start: "00:00", end: "06:00", expected: 6, desc: "새벽 근무 전체 (00:00~06:00)" },
      { start: "22:00", end: "06:00", expected: 8, desc: "밤새 근무 (22:00~06:00)" },
      { start: "23:00", end: "07:00", expected: 8, desc: "밤새 근무 초과 (23:00~07:00)" },
      { start: "21:00", end: "23:00", expected: 1, desc: "22시 걸치는 근무 (21:00~23:00)" },
      { start: "23:00", end: "01:00", expected: 2, desc: "자정 걸치는 근무 (23:00~01:00)" },
      { start: "09:00", end: "18:00", expected: 0, desc: "주간 근무만 (09:00~18:00)" },
      { start: "20:00", end: "05:00", expected: 7, desc: "저녁~새벽 (20:00~05:00)" },
      { start: "22:00", end: "24:00", expected: 2, desc: "22시~자정 (22:00~24:00)" },
      { start: "00:00", end: "02:00", expected: 2, desc: "자정~새벽 (00:00~02:00)" },
      { start: "03:00", end: "06:00", expected: 3, desc: "새벽 끝부분 (03:00~06:00)" },
      { start: "05:59", end: "06:01", expected: 1/60, desc: "06시 걸치는 경우 (05:59~06:01)" }
    ];
    
    const resultsDiv = document.getElementById('results');
    let passCount = 0;
    let failCount = 0;
    
    testCases.forEach((test, index) => {
      const result = calculateNightHours(test.start, test.end);
      const rounded = Math.round(result * 60) / 60; // 1분 단위로 반올림
      const expectedRounded = Math.round(test.expected * 60) / 60;
      const pass = Math.abs(rounded - expectedRounded) < 0.02; // 오차 허용
      
      if (pass) passCount++;
      else failCount++;
      
      const div = document.createElement('div');
      div.className = `test-case ${pass ? 'pass' : 'fail'}`;
      div.innerHTML = `
        <strong>Test ${index + 1}: ${test.desc}</strong><br>
        근무시간: ${test.start} ~ ${test.end}<br>
        예상: ${test.expected.toFixed(2)}시간 | 결과: ${result.toFixed(2)}시간 | 
        <strong>${pass ? '✅ PASS' : '❌ FAIL'}</strong>
      `;
      resultsDiv.appendChild(div);
    });
    
    const summary = document.createElement('div');
    summary.style.marginTop = '20px';
    summary.style.padding = '10px';
    summary.style.backgroundColor = failCount === 0 ? '#d4edda' : '#fff3cd';
    summary.innerHTML = `
      <h2>테스트 결과</h2>
      <p>✅ 통과: ${passCount} / ${testCases.length}</p>
      <p>❌ 실패: ${failCount} / ${testCases.length}</p>
    `;
    resultsDiv.appendChild(summary);
  </script>
</body>
</html>
